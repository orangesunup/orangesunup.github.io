import{d as R,b as L,r as I,e as i,f as m,y as g,w as a,h as l,n as b,t as c,Q as Y,R as M,j as e,E as se,G as ue,a as ie,i as Q,g as P,k as v,S as de,_ as K,U as me,V as y,P as pe,N as ce,W as be,F as fe,K as ge,M as we,X as ve,Y as Se,Z as _e}from"./index-3efbb394.js";import{_ as he}from"./notData-2026ca54.js";import{I as ke,u as ye}from"./index-7154a9df.js";import{d as D}from"./util-8cf766eb.js";import{u as $e}from"./useSelection-1dc1eb7e.js";import{u as Ve}from"./useAuthButtons-6e5ad93a.js";import{u as Ce}from"./useTable-6d3cf82e.js";import{a as De}from"./serviceDict-19376974.js";import{c as Ie,f as Ee,h as Ue,j as Ne,k as Oe,l as Te,n as Fe,o as We}from"./basicInfo-e79afad1.js";import{u as q}from"./useHandleData-6dfe8d42.js";import"./plugin-vue_export-helper-b2bddca3.js";import"./index-2ef92394.js";const Pe=R({setup(j,{expose:U}){const N=L({SkuId:[{required:!0,trigger:"blur"}],WarehouseId:[{required:!0,trigger:"blur"}],Owner:[{required:!0,trigger:"blur"}],SkuName:[{required:!0,trigger:"blur"}],Qty:[{required:!0,trigger:"blur"}]}),p=I(!1),r=I({isView:!1,title:""}),O=o=>{r.value=o,p.value=!0},S=I(),$=()=>{S.value.validate(async o=>{if(!!o)try{if(!r.value.apiUrl)return;await r.value.apiUrl(r.value.rowData),se.success({message:`${r.value.title}\u6210\u529F\uFF01`}),r.value.getTableList&&r.value.getTableList(),p.value=!1}catch(s){}})};return U({acceptParams:O}),(o,s)=>{const _=i("el-input"),h=i("el-form-item"),T=i("el-form"),E=i("el-button"),F=i("el-drawer");return m(),g(F,{modelValue:p.value,"onUpdate:modelValue":s[6]||(s[6]=d=>p.value=d),"destroy-on-close":!0,size:"550px",title:r.value.title+o.$t("set.StageSeting")},{footer:a(()=>[l(E,{onClick:s[5]||(s[5]=d=>p.value=!1)},{default:a(()=>[b(c(o.$t("set.Cancel")),1)]),_:1}),Y(l(E,{type:"primary",onClick:$},{default:a(()=>[b(c(o.$t("set.Confirm")),1)]),_:1},512),[[M,!r.value.isView]])]),default:a(()=>[l(T,{ref_key:"ruleFormRef",ref:S,rules:e(N),disabled:r.value.isView,model:r.value.rowData,"label-width":"150px"},{default:a(()=>[l(h,{label:o.$t("set.SKU"),prop:"SkuId",clearable:""},{default:a(()=>[l(_,{modelValue:r.value.rowData.SkuId,"onUpdate:modelValue":s[0]||(s[0]=d=>r.value.rowData.SkuId=d),disabled:r.value.title!==o.$t("set.Add")},null,8,["modelValue","disabled"])]),_:1},8,["label"]),l(h,{label:o.$t("set.WarehouseId"),prop:"WarehouseId",clearable:""},{default:a(()=>[l(_,{modelValue:r.value.rowData.WarehouseId,"onUpdate:modelValue":s[1]||(s[1]=d=>r.value.rowData.WarehouseId=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(h,{label:o.$t("set.Owner"),prop:"Owner",clearable:""},{default:a(()=>[l(_,{modelValue:r.value.rowData.Owner,"onUpdate:modelValue":s[2]||(s[2]=d=>r.value.rowData.Owner=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(h,{label:o.$t("set.SkuName"),prop:"SkuName",clearable:""},{default:a(()=>[l(_,{modelValue:r.value.rowData.SkuName,"onUpdate:modelValue":s[3]||(s[3]=d=>r.value.rowData.SkuName=d)},null,8,["modelValue"])]),_:1},8,["label"]),l(h,{label:o.$t("set.Qty"),prop:"Qty",clearable:""},{default:a(()=>[l(_,{modelValue:r.value.rowData.Qty,"onUpdate:modelValue":s[4]||(s[4]=d=>r.value.rowData.Qty=d),type:"number"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","disabled","model"])]),_:1},8,["modelValue","title"])}}}),Re={class:"table-box"},ze={class:"table-search"},Ae={class:"more-item"},Be={class:"search-operation"},Qe={class:"table-header"},Ke={class:"header-button-lf"},qe={class:"header-button-ri"},Le={key:2},Ye={class:"table-empty"},Me=v("img",{src:he,alt:"notData"},null,-1),je=R({name:"stageSeting"}),nt=R({...je,setup(j){const U=ue(),N=ie(()=>U.language);Q.global.locale=N.value;const{t:p}=Q.global,r=L({}),{tableData:O,searchShow:S,pageable:$,searchParam:o,getTableList:s,search:_,reset:h,handleSizeChange:T,handleCurrentChange:E}=Ce(Ie,r),{selectionChange:F,getRowKeys:d}=$e(),{BUTTONS:f}=Ve(),H=async()=>{ye(Ee,p("set.StageSeting"),o.value)},G=async(t,u)=>{await q(Fe,{sku:u.SkuId,status:t},p("set.Change")+`\u3010${u.SkuId}\u3011`+p("set.Status")),s()},z=I(),X=()=>{let t={title:p("set.StageSeting"),tempApi:Ue,importApi:Ne,getTableList:s};z.value.acceptParams(t)},Z=async t=>{await q(We,{id:t.SerialKey},p("set.Delete")+`\u3010${t.SkuId}\u3011`+p("set.StageSeting")),s()},A=I(),B=(t,u={})=>{let V={title:t,rowData:{...u},isView:t==="\u67E5\u770B",apiUrl:t==="\u65B0\u589E"?Oe:t==="\u7F16\u8F91"?Te:"",getTableList:s};A.value.acceptParams(V)};return(t,u)=>{const V=i("el-input"),C=i("el-form-item"),J=i("el-option"),x=i("el-select"),ee=i("el-date-picker"),te=i("el-form"),w=i("el-button"),le=i("el-icon"),k=i("el-table-column"),ae=i("el-switch"),oe=i("el-tag"),re=i("el-table"),ne=i("el-pagination");return m(),P("div",Re,[v("div",ze,[l(te,{ref:"formRef",model:e(o),inline:!0,"label-width":"100px"},{default:a(()=>[l(C,{label:t.$t("set.SKU")},{default:a(()=>[l(V,{modelValue:e(o).SkuId,"onUpdate:modelValue":u[0]||(u[0]=n=>e(o).SkuId=n),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),l(C,{label:t.$t("set.WarehouseId")},{default:a(()=>[l(V,{modelValue:e(o).WarehouseId,"onUpdate:modelValue":u[1]||(u[1]=n=>e(o).WarehouseId=n),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),l(C,{label:t.$t("set.Owner")},{default:a(()=>[l(V,{modelValue:e(o).Owner,"onUpdate:modelValue":u[2]||(u[2]=n=>e(o).Owner=n),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),l(C,{label:t.$t("set.Enable")},{default:a(()=>[l(x,{modelValue:e(o).Enable,"onUpdate:modelValue":u[3]||(u[3]=n=>e(o).Enable=n),clearable:""},{default:a(()=>[(m(!0),P(fe,null,ge(e(De),n=>(m(),g(J,{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),Y(v("div",Ae,[l(C,{label:t.$t("set.AddedTime")},{default:a(()=>[l(ee,{modelValue:e(o).AddedTime,"onUpdate:modelValue":u[4]||(u[4]=n=>e(o).AddedTime=n),type:"datetimerange","start-placeholder":t.$t("set.StartTime"),"end-placeholder":t.$t("set.EndTime"),"value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"])],512),[[M,e(S)]])]),_:1},8,["model"]),v("div",Be,[l(w,{type:"primary",icon:e(de),onClick:e(_)},{default:a(()=>[b(c(t.$t("set.Search")),1)]),_:1},8,["icon","onClick"]),l(w,{icon:e(K),onClick:e(h)},{default:a(()=>[b(c(t.$t("set.Reset")),1)]),_:1},8,["icon","onClick"]),l(w,{type:"primary",link:"",class:"search-isOpen",onClick:u[5]||(u[5]=n=>S.value=!e(S))},{default:a(()=>[b(c(e(S)?t.$t("set.Close"):t.$t("set.Open"))+" ",1),l(le,{class:"el-icon--right"},{default:a(()=>[(m(),g(we(e(S)?e(ve):e(Se))))]),_:1})]),_:1})])]),v("div",Qe,[v("div",Ke,[e(f).add?(m(),g(w,{key:0,type:"primary",icon:e(me),onClick:u[6]||(u[6]=n=>B(t.$t("set.Add")))},{default:a(()=>[b(c(t.$t("set.AddStageSeting")),1)]),_:1},8,["icon"])):y("",!0),e(f).export?(m(),g(w,{key:1,type:"primary",icon:e(pe),plain:"",onClick:H},{default:a(()=>[b(c(t.$t("set.StageSetingExport")),1)]),_:1},8,["icon"])):y("",!0),e(f).import?(m(),g(w,{key:2,type:"primary",icon:e(ce),plain:"",onClick:X},{default:a(()=>[b(c(t.$t("set.BatchImport")),1)]),_:1},8,["icon"])):y("",!0)]),v("div",qe,[l(w,{icon:e(be),circle:"",onClick:e(s)},null,8,["icon","onClick"])])]),l(re,{height:"575",data:e(O),border:!0,onSelectionChange:e(F),"row-key":e(d),"row-style":{height:"30px"},"cell-style":{padding:"0px"},stripe:""},{empty:a(()=>[v("div",Ye,[Me,v("div",null,c(t.$t("set.NoData")),1)])]),default:a(()=>[l(k,{prop:"SkuId",label:t.$t("set.SKU"),formatter:e(D),"show-overflow-tooltip":"",width:"300",sortable:"","sort-orders":["descending","ascending"]},null,8,["label","formatter"]),l(k,{prop:"WarehouseId",label:t.$t("set.WarehouseId"),formatter:e(D),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),l(k,{prop:"Owner",label:t.$t("set.Owner"),formatter:e(D),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),l(k,{prop:"SkuName",label:t.$t("set.SkuName"),formatter:e(D),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),l(k,{prop:"Qty",label:t.$t("set.Qty"),formatter:e(D),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),l(k,{prop:"Enable",label:t.$t("set.Status"),width:"180"},{default:a(n=>[e(f).status?(m(),g(ae,{key:0,value:n.row.Enable,"active-text":n.row.Enable===1?t.$t("set.Enable"):t.$t("set.Disable"),"active-value":1,"inactive-value":0,onChange:W=>G(W,n.row)},null,8,["value","active-text","onChange"])):(m(),g(oe,{key:1,type:n.row.Enable===1?"success":"danger"},{default:a(()=>[b(c(n.row.Enable===1?t.$t("set.Enable"):t.$t("set.Disable")),1)]),_:2},1032,["type"]))]),_:1},8,["label"]),l(k,{label:t.$t("set.Operate"),fixed:"right",width:"200"},{default:a(n=>[e(f).edit?(m(),g(w,{key:0,type:"primary",link:"",icon:e(_e),onClick:W=>B(t.$t("set.Edit"),n.row)},{default:a(()=>[b(c(t.$t("set.Edit")),1)]),_:2},1032,["icon","onClick"])):y("",!0),e(f).delete?(m(),g(w,{key:1,type:"primary",link:"",icon:e(K),onClick:W=>Z(n.row)},{default:a(()=>[b(c(t.$t("set.Delete")),1)]),_:2},1032,["icon","onClick"])):y("",!0),!e(f).view&&!e(f).edit&&!e(f).reset&&!e(f).delete?(m(),P("span",Le,"--")):y("",!0)]),_:1},8,["label"])]),_:1},8,["data","onSelectionChange","row-key"]),l(ne,{currentPage:e($).pageNum,"page-size":e($).pageSize,"page-sizes":[10,25,50,100,1e3],background:"",layout:"total, sizes, prev, pager, next, jumper",total:e($).total,onSizeChange:e(T),onCurrentChange:e(E)},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"]),l(Pe,{ref_key:"drawerRef",ref:A},null,512),l(ke,{ref_key:"dialogRef",ref:z},null,512)])}}});export{nt as default};
