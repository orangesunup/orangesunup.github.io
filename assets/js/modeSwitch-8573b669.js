import{u as A}from"./useTable-6d3cf82e.js";import{x as D}from"./serviceDict-19376974.js";import{g as j,m as J}from"./trolley-b1fc672d.js";import{d as c}from"./util-8cf766eb.js";import{d as V,G as K,a as R,i as y,r as S,b as q,e as u,f,g as _,h as l,w as n,j as e,k as T,F as k,K as E,n as x,E as L,y as M}from"./index-3efbb394.js";import"./index-2ef92394.js";const G=x("\u5207\u6362 "),I={class:"table-box"},P={class:"table-search"},z=V({name:"modeSwitch"}),te=V({...z,setup(H){const g=K(),C=R(()=>g.language);y.global.locale=C.value;const{t:m}=y.global,{tableData:v,searchParam:d,getTableList:$}=A(j),w=S(),F=q({stock:[{required:!0,message:"\u8BF7\u9009\u62E9\u5207\u6362\u5E93\u4F4D",trigger:"blur"}],modeSwitch:[{required:!0,message:"\u8BF7\u9009\u62E9\u5207\u6362\u6A21\u5F0F",trigger:"blur"}]});let b=S([{}]);const O=async t=>{!t||t.validate(async a=>{a&&(await J({mode:d.value,name:g.userInfo}).then(r=>{let s=JSON.parse(r);s.code==200?L({type:"success",message:s.msg}):L({type:"error",message:s.msg})}),$())})};function U(t){let r=JSON.parse(JSON.stringify(v))._object.tableData;Object.keys(r).map(s=>{let p=r[s];p.SwitchLocations==t&&(p.CurrentMode=="\u7A7A\u6258\u76D8\u5165\u5E93"?b.value=[{label:m("set.EmptyTostorage"),value:"EmptyTostorage"},{label:m("set.EmptyTooutput"),value:"EmptyTooutput"}]:p.CurrentMode=="\u5B9E\u7269\u5165\u5E93"?b.value=[{label:m("set.StorageToempty"),value:"StorageToempty"},{label:m("set.StorageTooutput"),value:"StorageTooutput"}]:b.value=[{label:m("set.OutputToempty"),value:"OutputToempty"},{label:m("set.OutputTostorage"),value:"OutputTostorage"}])})}return(t,a)=>{const r=u("el-option"),s=u("el-select"),p=u("el-form-item"),h=u("el-button"),B=u("el-form"),i=u("el-table-column"),N=u("el-table");return f(),_("div",null,[l(B,{ref_key:"formRef",ref:w,model:e(d),inline:!0,"label-width":"100px",rules:e(F)},{default:n(()=>[l(p,{label:t.$t("set.SwitchLocations"),prop:"stock"},{default:n(()=>[l(s,{onChange:U,modelValue:e(d).stock,"onUpdate:modelValue":a[0]||(a[0]=o=>e(d).stock=o),clearable:""},{default:n(()=>[(f(!0),_(k,null,E(e(D),o=>(f(),M(r,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(p,{label:t.$t("set.Mode"),prop:"modeSwitch"},{default:n(()=>[l(s,{modelValue:e(d).modeSwitch,"onUpdate:modelValue":a[1]||(a[1]=o=>e(d).modeSwitch=o),"value-key":"value",clearable:""},{default:n(()=>[(f(!0),_(k,null,E(e(b),o=>(f(),M(r,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(h,{onClick:a[2]||(a[2]=o=>O(w.value)),class:"btn"},{default:n(()=>[G]),_:1})]),_:1},8,["model","rules"]),T("div",I,[T("div",P,[l(N,{height:"575",data:e(v),border:!0,"row-style":{height:"30px"},"cell-style":{padding:"0px"},stripe:""},{default:n(()=>[l(i,{prop:"CurrentMode",label:t.$t("set.CurrentMode"),formatter:e(c),"show-overflow-tooltip":"",width:"180"},null,8,["label","formatter"]),l(i,{prop:"LastMode",label:t.$t("set.LastMode"),formatter:e(c),"show-overflow-tooltip":"",width:"180"},null,8,["label","formatter"]),l(i,{prop:"SwitchLocations",label:t.$t("set.SwitchLocations"),formatter:e(c),"show-overflow-tooltip":"",width:"180"},null,8,["label","formatter"]),l(i,{prop:"AddedTime",label:t.$t("set.AddedTime"),formatter:e(c),"show-overflow-tooltip":"",width:"180"},null,8,["label","formatter"]),l(i,{prop:"LastUpdateUserKey",label:t.$t("set.LastUpdateUserKey"),formatter:e(c),"show-overflow-tooltip":"",width:"180"},null,8,["label","formatter"]),l(i,{prop:"LastUpdateTime",label:t.$t("set.LastUpdateTime"),formatter:e(c),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"])]),_:1},8,["data"])])])])}}});export{te as default};
