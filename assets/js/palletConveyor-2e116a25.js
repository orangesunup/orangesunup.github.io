import{d as D,G as ae,a as le,i as P,b as re,r as ne,e as d,f as p,g as $,k as u,h as o,w as l,j as e,S as se,_ as ie,y as w,P as de,V as y,W as F,F as me,K as ue,t as m,a7 as pe,a8 as E,Q as ce,R as fe,n as h,M as he,X as we,Y as be,ac as ye,Z as Ce}from"./index-3efbb394.js";import{_ as ke}from"./notData-2026ca54.js";import{d as s,a as ve}from"./util-8cf766eb.js";import{h as _e}from"./serviceDict-19376974.js";import{I as ge,u as Te}from"./index-7154a9df.js";import{u as $e}from"./useSelection-1dc1eb7e.js";import{u as S}from"./useHandleData-6dfe8d42.js";import{u as Se}from"./useAuthButtons-6e5ad93a.js";import{u as Ve}from"./useTable-6d3cf82e.js";import{_ as Ke}from"./taskDrawer-ace4e4bf.js";import{a as Pe,b as Fe,m as V,c as Ee}from"./task-dcbb5ca7.js";import"./plugin-vue_export-helper-b2bddca3.js";import"./index-2ef92394.js";const De={class:"table-box"},Le={class:"table-search"},Re={style:{"margin-left":"24px"}},Ue={class:"more-item"},ze={class:"search-operation"},Ne={class:"table-header"},Be={class:"header-button-lf"},Ae={class:"header-button-ri"},He={style:{"margin-left":"0"}},Ie={key:4},Ye={class:"table-empty"},Oe=u("img",{src:ke,alt:"notData"},null,-1),Me=D({name:"palletConveyor"}),rt=D({...Me,setup(je){const L=ae(),R=le(()=>L.language);P.global.locale=R.value;const{t:b}=P.global,U=re({}),{tableData:z,pageable:C,searchParam:i,searchShow:k,initSearchParam:N,getTableList:v,search:B,reset:A,handleSizeChange:H,handleCurrentChange:I}=Ve(Pe,U),{selectionChange:Y,getRowKeys:O}=$e(),{BUTTONS:c}=Se();N.value={};const M=async t=>{await S(V,{state:"Resend",taskKey:t.TaskKey},b("set.Resend")+`\u3010${t.ContainerCode}\u3011`+b("set.Task")),v()},j=async t=>{await S(V,{state:"Finished",taskKey:t.TaskKey},b("set.Complete")+`\u3010${t.ContainerCode}\u3011`+b("set.Task")),v()},q=async t=>{await S(V,{state:"Cancelled",taskKey:t.TaskKey},b("set.Cancel")+`\u3010${t.ContainerCode}\u3011`+b("set.Task")),v()},G=async()=>{Te(Fe,"\u6258\u76D8\u8F93\u9001\u7EBF",i.value)},K=ne(),Q=(t,n={})=>{let _={title:t,rowData:{...n},isView:t==="\u67E5\u770B",apiUrl:t==="\u7F16\u8F91"?Ee:"",getTableList:v};K.value.acceptParams(_)};return(t,n)=>{const _=d("el-input"),g=d("el-form-item"),W=d("el-option"),X=d("el-select"),Z=d("el-switch"),J=d("el-date-picker"),x=d("el-form"),f=d("el-button"),ee=d("el-icon"),r=d("el-table-column"),te=d("el-table"),oe=d("el-pagination");return p(),$("div",De,[u("div",Le,[o(x,{ref:"formRef",model:e(i),inline:!0,"label-width":"100px"},{default:l(()=>[o(g,{label:t.$t("set.ContainerCode")},{default:l(()=>[o(_,{modelValue:e(i).ContainerCode,"onUpdate:modelValue":n[0]||(n[0]=a=>e(i).ContainerCode=a),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),o(g,{label:t.$t("set.ExternalTaskKey")},{default:l(()=>[o(_,{modelValue:e(i).ExternalTaskKey,"onUpdate:modelValue":n[1]||(n[1]=a=>e(i).ExternalTaskKey=a),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),o(g,{label:t.$t("set.State")},{default:l(()=>[o(X,{modelValue:e(i).State,"onUpdate:modelValue":n[2]||(n[2]=a=>e(i).State=a),clearable:"",multiple:"","collapse-tags":""},{default:l(()=>[(p(!0),$(me,null,ue(e(_e),a=>(p(),w(W,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),u("span",Re,m(t.$t("set.IsHistory")),1),o(Z,{modelValue:e(i).IsHistory,"onUpdate:modelValue":n[3]||(n[3]=a=>e(i).IsHistory=a),style:{"margin-left":"8px"},"inline-prompt":"","active-icon":e(pe),"inactive-icon":e(E)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1},8,["label"]),ce(u("div",Ue,[o(g,{label:t.$t("set.AddedTime")},{default:l(()=>[o(J,{modelValue:e(i).AddedTime,"onUpdate:modelValue":n[4]||(n[4]=a=>e(i).AddedTime=a),type:"datetimerange","start-placeholder":t.$t("set.StartTime"),"end-placeholder":t.$t("set.EndTime"),"value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"])],512),[[fe,e(k)]])]),_:1},8,["model"]),u("div",ze,[o(f,{type:"primary",icon:e(se),onClick:e(B)},{default:l(()=>[h(m(t.$t("set.Search")),1)]),_:1},8,["icon","onClick"]),o(f,{icon:e(ie),onClick:e(A)},{default:l(()=>[h(m(t.$t("set.Reset")),1)]),_:1},8,["icon","onClick"]),o(f,{type:"primary",link:"",class:"search-isOpen",onClick:n[5]||(n[5]=a=>k.value=!e(k))},{default:l(()=>[h(m(e(k)?t.$t("set.Close"):t.$t("set.Open"))+" ",1),o(ee,{class:"el-icon--right"},{default:l(()=>[(p(),w(he(e(k)?e(we):e(be))))]),_:1})]),_:1})])]),u("div",Ne,[u("div",Be,[e(c).export?(p(),w(f,{key:0,type:"primary",icon:e(de),plain:"",onClick:G},{default:l(()=>[h(m(t.$t("set.PalletConveyorExport")),1)]),_:1},8,["icon"])):y("",!0)]),u("div",Ae,[o(f,{icon:e(F),circle:"",onClick:e(v)},null,8,["icon","onClick"])])]),o(te,{height:"575",data:e(z),border:!0,onSelectionChange:e(Y),"row-key":e(O),"row-style":{height:"30px"},"cell-style":{padding:"0px"},stripe:""},{empty:l(()=>[u("div",Ye,[Oe,u("div",null,m(t.$t("set.NoData")),1)])]),default:l(()=>[o(r,{label:t.$t("set.SerialNumber"),width:"60"},{default:l(a=>[u("span",He,m((e(C).pageNum-1)*e(C).pageSize+a.$index+1),1)]),_:1},8,["label"]),o(r,{prop:"TaskKey",label:t.$t("set.TaskKey"),formatter:e(s),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),o(r,{prop:"ParentTaskKey",label:t.$t("set.ParentTaskKey"),formatter:e(s),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),o(r,{prop:"ContainerCode",label:t.$t("set.ContainerCode"),formatter:e(s),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),o(r,{prop:"Priority",label:t.$t("set.Priority"),formatter:e(s),"show-overflow-tooltip":"",width:"100"},null,8,["label","formatter"]),o(r,{prop:"State",label:t.$t("set.State"),formatter:e(ve),"show-overflow-tooltip":"",width:"100"},null,8,["label","formatter"]),o(r,{prop:"FromLocation",label:t.$t("set.FromLocation"),formatter:e(s),"show-overflow-tooltip":"",width:"100"},null,8,["label","formatter"]),o(r,{prop:"ToLocation",label:t.$t("set.ToLocation"),formatter:e(s),"show-overflow-tooltip":"",width:"100"},null,8,["label","formatter"]),o(r,{prop:"CurrentLocation",label:t.$t("set.CurrentLocation"),formatter:e(s),"show-overflow-tooltip":"",width:"150"},null,8,["label","formatter"]),o(r,{prop:"TryCount",label:t.$t("set.TryCount"),formatter:e(s),"show-overflow-tooltip":"",width:"100"},null,8,["label","formatter"]),o(r,{prop:"ExternalTaskKey",label:t.$t("set.ExternalTaskKey"),formatter:e(s),"show-overflow-tooltip":"",width:"150"},null,8,["label","formatter"]),o(r,{prop:"EquimentTaskKey",label:t.$t("set.EquimentTaskKey"),formatter:e(s),"show-overflow-tooltip":"",width:"150"},null,8,["label","formatter"]),o(r,{prop:"AddedTime",label:t.$t("set.AddedTime"),formatter:e(s),"show-overflow-tooltip":"",sortable:"","sort-orders":["descending","ascending"],width:"200"},null,8,["label","formatter"]),o(r,{prop:"LastUpdateTime",label:t.$t("set.LastUpdateTime"),formatter:e(s),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),o(r,{prop:"CompleteTime",label:t.$t("set.CompletedTime"),formatter:e(s),"show-overflow-tooltip":"",sortable:"","sort-orders":["descending","ascending"],width:"200"},null,8,["label","formatter"]),o(r,{label:t.$t("set.Operate"),fixed:"right",width:"300"},{default:l(a=>[e(c).reset&&a.row.State!="Finished"&&a.row.Status!="Cancelled"?(p(),w(f,{key:0,type:"primary",link:"",icon:e(F),onClick:T=>M(a.row)},{default:l(()=>[h(m(t.$t("set.Resend")),1)]),_:2},1032,["icon","onClick"])):y("",!0),e(c).reset&&a.row.State!="Finished"&&a.row.Status!="Cancelled"?(p(),w(f,{key:1,type:"primary",link:"",icon:e(ye),onClick:T=>j(a.row)},{default:l(()=>[h(m(t.$t("set.Complete")),1)]),_:2},1032,["icon","onClick"])):y("",!0),e(c).delete&&a.row.State!="Finished"&&a.row.Status!="Cancelled"?(p(),w(f,{key:2,type:"primary",link:"",icon:e(E),onClick:T=>q(a.row)},{default:l(()=>[h(m(t.$t("set.Cancel")),1)]),_:2},1032,["icon","onClick"])):y("",!0),e(c).delete&&a.row.State!="Finished"&&a.row.Status!="Cancelled"?(p(),w(f,{key:3,type:"primary",link:"",icon:e(Ce),onClick:T=>Q(t.$t("set.Edit"),a.row)},{default:l(()=>[h(m(t.$t("set.Edit")),1)]),_:2},1032,["icon","onClick"])):y("",!0),!e(c).view&&!e(c).edit&&!e(c).reset&&!e(c).delete?(p(),$("span",Ie,"--")):y("",!0)]),_:1},8,["label"])]),_:1},8,["data","onSelectionChange","row-key"]),o(oe,{currentPage:e(C).pageNum,"page-size":e(C).pageSize,"page-sizes":[10,25,50,100,1e3],background:"",layout:"total, sizes, prev, pager, next, jumper",total:e(C).total,onSizeChange:e(H),onCurrentChange:e(I)},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"]),o(Ke,{ref_key:"drawerRef",ref:K},null,512),o(ge,{ref:"dialogRef"},null,512)])}}});export{rt as default};
