import{d as O,b as z,r as $,e as r,f as b,y,w as a,h as l,n as v,t as _,Q as N,R as H,g as R,K as I,j as e,F as L,E as x,k as f,S as ee,_ as le,P as te,V as P,W as ae,a7 as oe,a8 as re,M as ne,X as se,Y as ie,Z as ue}from"./index-3efbb394.js";import{_ as de}from"./notData-2026ca54.js";import{d as Y}from"./serviceDict-19376974.js";import{d as w,o as pe}from"./util-8cf766eb.js";import{I as me,u as ce}from"./index-7154a9df.js";import{u as fe}from"./useSelection-1dc1eb7e.js";import{u as be}from"./useAuthButtons-6e5ad93a.js";import{u as _e}from"./useTable-6d3cf82e.js";import{B as we,C as ye,D as ve}from"./g2m-04b5505e.js";import"./plugin-vue_export-helper-b2bddca3.js";import"./index-2ef92394.js";const Ce=O({name:"cancelBODetailDrawer"}),he=O({...Ce,setup(M,{expose:U}){const B=z({OrderKey:[{trigger:"blur"}],TaskKey:[{trigger:"blur"}],CancelQty:[{required:!0,trigger:"blur"}],CancelStatus:[{required:!0,trigger:"change"}]}),m=$(!1),o=$({isView:!1,title:""}),u=p=>{o.value=p,m.value=!0},k=$(),F=()=>{k.value.validate(async p=>{if(!!p)try{if(!o.value.apiUrl)return;await o.value.apiUrl(o.value.rowData),x.success({message:`${o.value.title}\u8BA2\u5355\u6210\u529F\uFF01`}),o.value.getTableList&&o.value.getTableList(),m.value=!1}catch(n){}})};return U({acceptParams:u}),(p,n)=>{const V=r("el-input"),C=r("el-form-item"),Q=r("el-option"),h=r("el-select"),E=r("el-form"),D=r("el-button"),S=r("el-drawer");return b(),y(S,{modelValue:m.value,"onUpdate:modelValue":n[5]||(n[5]=s=>m.value=s),"destroy-on-close":!0,size:"500px",title:o.value.title+p.$t("set.CancelBODetail")},{footer:a(()=>[l(D,{onClick:n[4]||(n[4]=s=>m.value=!1)},{default:a(()=>[v(_(p.$t("set.Cancel")),1)]),_:1}),N(l(D,{type:"primary",onClick:F},{default:a(()=>[v(_(p.$t("set.Confirm")),1)]),_:1},512),[[H,!o.value.isView]])]),default:a(()=>[l(E,{ref_key:"ruleFormRef",ref:k,rules:e(B),disabled:o.value.isView,model:o.value.rowData,"label-width":"100px"},{default:a(()=>[l(C,{label:p.$t("set.OrderKey"),prop:"OrderKey",clearable:""},{default:a(()=>[l(V,{modelValue:o.value.rowData.OrderKey,"onUpdate:modelValue":n[0]||(n[0]=s=>o.value.rowData.OrderKey=s),disabled:""},null,8,["modelValue"])]),_:1},8,["label"]),l(C,{label:p.$t("set.TaskKey"),prop:"TaskKey",clearable:""},{default:a(()=>[l(V,{modelValue:o.value.rowData.TaskKey,"onUpdate:modelValue":n[1]||(n[1]=s=>o.value.rowData.TaskKey=s),disabled:""},null,8,["modelValue"])]),_:1},8,["label"]),l(C,{label:p.$t("set.CancelQty"),prop:"CancelQty",clearable:""},{default:a(()=>[l(V,{modelValue:o.value.rowData.CancelQty,"onUpdate:modelValue":n[2]||(n[2]=s=>o.value.rowData.CancelQty=s),disabled:""},null,8,["modelValue"])]),_:1},8,["label"]),l(C,{label:p.$t("set.CancelStatus"),prop:"CancelStatus",clearable:""},{default:a(()=>[l(h,{modelValue:o.value.rowData.CancelStatus,"onUpdate:modelValue":n[3]||(n[3]=s=>o.value.rowData.CancelStatus=s),clearable:""},{default:a(()=>[(b(!0),R(L,null,I(e(Y),s=>(b(),y(Q,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","disabled","model"])]),_:1},8,["modelValue","title"])}}}),ge={class:"table-box"},ke={class:"table-search"},Ve={style:{"margin-left":"24px"}},$e={class:"more-item"},De={class:"search-operation"},Se={class:"table-header"},Ke={class:"header-button-lf"},Te={class:"header-button-ri"},Oe={class:"table-empty"},Ue=f("img",{src:de,alt:"notData"},null,-1),Be=O({name:"cancelBODetail"}),We=O({...Be,setup(M){const U=z({}),{tableData:B,searchShow:m,pageable:o,searchParam:u,getTableList:k,search:F,reset:p,handleSizeChange:n,handleCurrentChange:V}=_e(we,U),{selectionChange:C,getRowKeys:Q}=fe(),{BUTTONS:h}=be(),E=async()=>{ce(ye,"\u53D6\u6D88\u660E\u7EC6",u.value)},D=$(),S=$(),s=(t,d={})=>{let K={title:t,rowData:{...d},isView:t==="\u67E5\u770B",apiUrl:t==="\u7F16\u8F91"?ve:"",getTableList:k};S.value.acceptParams(K)};return(t,d)=>{const K=r("el-input"),T=r("el-form-item"),W=r("el-option"),j=r("el-select"),q=r("el-switch"),A=r("el-date-picker"),X=r("el-form"),g=r("el-button"),Z=r("el-icon"),c=r("el-table-column"),G=r("el-table"),J=r("el-pagination");return b(),R("div",ge,[f("div",ke,[l(X,{ref:"formRef",model:e(u),inline:!0,"label-width":"100px"},{default:a(()=>[l(T,{label:t.$t("set.OrderKey")},{default:a(()=>[l(K,{modelValue:e(u).OrderKey,"onUpdate:modelValue":d[0]||(d[0]=i=>e(u).OrderKey=i),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),l(T,{label:t.$t("set.TaskKey")},{default:a(()=>[l(K,{modelValue:e(u).TaskKey,"onUpdate:modelValue":d[1]||(d[1]=i=>e(u).TaskKey=i),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),l(T,{label:t.$t("set.CancelStatus")},{default:a(()=>[l(j,{modelValue:e(u).CancelStatus,"onUpdate:modelValue":d[2]||(d[2]=i=>e(u).CancelStatus=i),clearable:"",multiple:"","collapse-tags":""},{default:a(()=>[(b(!0),R(L,null,I(e(Y),i=>(b(),y(W,{key:i.value,label:i.label,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),f("span",Ve,_(t.$t("set.IsHistory")),1),l(q,{modelValue:e(u).IsHistory,"onUpdate:modelValue":d[3]||(d[3]=i=>e(u).IsHistory=i),style:{"margin-left":"8px"},"inline-prompt":"","active-icon":e(oe),"inactive-icon":e(re)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1},8,["label"]),N(f("div",$e,[l(T,{label:t.$t("set.CancelTime")},{default:a(()=>[l(A,{modelValue:e(u).CancelTime,"onUpdate:modelValue":d[4]||(d[4]=i=>e(u).CancelTime=i),type:"datetimerange","start-placeholder":t.$t("set.StartTime"),"end-placeholder":t.$t("set.EndTime"),"value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"])],512),[[H,e(m)]])]),_:1},8,["model"]),f("div",De,[l(g,{type:"primary",icon:e(ee),onClick:e(F)},{default:a(()=>[v(_(t.$t("set.Search")),1)]),_:1},8,["icon","onClick"]),l(g,{icon:e(le),onClick:e(p)},{default:a(()=>[v(_(t.$t("set.Reset")),1)]),_:1},8,["icon","onClick"]),l(g,{type:"primary",link:"",class:"search-isOpen",onClick:d[5]||(d[5]=i=>m.value=!e(m))},{default:a(()=>[v(_(e(m)?t.$t("set.Close"):t.$t("set.Open"))+" ",1),l(Z,{class:"el-icon--right"},{default:a(()=>[(b(),y(ne(e(m)?e(se):e(ie))))]),_:1})]),_:1})])]),f("div",Se,[f("div",Ke,[e(h).export?(b(),y(g,{key:0,type:"primary",icon:e(te),plain:"",onClick:E},{default:a(()=>[v(_(t.$t("set.CancelBODetailExport")),1)]),_:1},8,["icon"])):P("",!0)]),f("div",Te,[l(g,{icon:e(ae),circle:"",onClick:e(k)},null,8,["icon","onClick"])])]),l(G,{height:"575",data:e(B),border:!0,onSelectionChange:e(C),"row-key":e(Q),"row-style":{height:"30px"},"cell-style":{padding:"0px"},stripe:"","highlight-current-row":""},{empty:a(()=>[f("div",Oe,[Ue,f("div",null,_(t.$t("set.NoData")),1)])]),default:a(()=>[l(c,{prop:"WaveKey",label:t.$t("set.WaveKey"),formatter:e(w),"show-overflow-tooltip":"",width:"150"},null,8,["label","formatter"]),l(c,{prop:"OrderKey",label:t.$t("set.OrderKey"),formatter:e(w),"show-overflow-tooltip":"",width:"180"},null,8,["label","formatter"]),l(c,{prop:"TaskKey",label:t.$t("set.TaskKey"),formatter:e(w),"show-overflow-tooltip":"",width:"180"},null,8,["label","formatter"]),l(c,{prop:"SKU",label:t.$t("set.SKU"),formatter:e(w),"show-overflow-tooltip":"",width:"180"},null,8,["label","formatter"]),l(c,{prop:"Qty",label:t.$t("set.PlanQty"),formatter:e(w),"show-overflow-tooltip":"",width:"150"},null,8,["label","formatter"]),l(c,{prop:"PickedQty",label:t.$t("set.PickedQty"),formatter:e(w),"show-overflow-tooltip":"",width:"140"},null,8,["label","formatter"]),l(c,{prop:"CancelStatus",label:t.$t("set.CancelStatus"),formatter:e(pe),"show-overflow-tooltip":"",width:"140"},null,8,["label","formatter"]),l(c,{prop:"CancelQty",label:t.$t("set.CancelQty"),formatter:e(w),"show-overflow-tooltip":"",width:"140"},null,8,["label","formatter"]),l(c,{prop:"CancelTime",label:t.$t("set.CancelTime"),"show-overflow-tooltip":"",width:"200"},null,8,["label"]),e(h).view||e(h).edit?(b(),y(c,{key:0,label:t.$t("set.Operate"),fixed:"right",width:"100"},{default:a(i=>[e(h).edit?(b(),y(g,{key:0,type:"primary",link:"",icon:e(ue),onClick:Fe=>s(t.$t("set.Edit"),i.row)},{default:a(()=>[v(_(t.$t("set.Edit")),1)]),_:2},1032,["icon","onClick"])):P("",!0)]),_:1},8,["label"])):P("",!0)]),_:1},8,["data","onSelectionChange","row-key"]),l(J,{currentPage:e(o).pageNum,"page-size":e(o).pageSize,"page-sizes":[10,25,50,100,1e3],background:"",layout:"total, sizes, prev, pager, next, jumper",total:e(o).total,onSizeChange:e(n),onCurrentChange:e(V)},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"]),l(he,{ref_key:"drawerRef",ref:S},null,512),l(me,{ref_key:"dialogRef",ref:D},null,512)])}}});export{We as default};
