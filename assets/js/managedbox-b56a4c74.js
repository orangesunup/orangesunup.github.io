import{d as E,b as P,r as C,e as s,f,y as v,w as o,h as l,n as g,t as b,Q,R as Y,j as e,E as Z,g as F,k as c,S as G,_ as J,P as ee,V as N,W as le,F as M,K as A,M as te,X as oe,Y as ae,Z as re}from"./index-3efbb394.js";import{_ as ne}from"./notData-2026ca54.js";import{b as se,a as ie}from"./serviceDict-19376974.js";import{d as $,b as ue,c as de}from"./util-8cf766eb.js";import{I as pe,u as me}from"./index-7154a9df.js";import{u as fe}from"./useSelection-1dc1eb7e.js";import{u as ce}from"./useAuthButtons-6e5ad93a.js";import{u as be}from"./useTable-6d3cf82e.js";import{g as we,e as he,m as ve}from"./g2m-04b5505e.js";import"./plugin-vue_export-helper-b2bddca3.js";import"./index-2ef92394.js";const ge=E({setup(x,{expose:B}){const D=P({BoxKey:[{trigger:"blur"}],TargetLocation:[{required:!0,trigger:"change"}]}),p=C(!1),a=C({isView:!1,title:""}),i=m=>{a.value=m,p.value=!0},y=C(),S=()=>{y.value.validate(async m=>{if(!!m)try{if(!a.value.apiUrl)return;await a.value.apiUrl(a.value.rowData),Z.success({message:`${a.value.title}\u5728\u7EBF\u5BB9\u5668\u6210\u529F\uFF01`}),a.value.getTableList&&a.value.getTableList(),p.value=!1}catch(u){}})};return B({acceptParams:i}),(m,u)=>{const T=s("el-input"),k=s("el-form-item"),L=s("el-form"),h=s("el-button"),R=s("el-drawer");return f(),v(R,{modelValue:p.value,"onUpdate:modelValue":u[3]||(u[3]=w=>p.value=w),"destroy-on-close":!0,size:"500px",title:a.value.title+m.$t("set.ManagedBox")},{footer:o(()=>[l(h,{onClick:u[2]||(u[2]=w=>p.value=!1)},{default:o(()=>[g(b(m.$t("set.Cancel")),1)]),_:1}),Q(l(h,{type:"primary",onClick:S},{default:o(()=>[g(b(m.$t("set.Confirm")),1)]),_:1},512),[[Y,!a.value.isView]])]),default:o(()=>[l(L,{ref_key:"ruleFormRef",ref:y,rules:e(D),disabled:a.value.isView,model:a.value.rowData,"label-width":"100px"},{default:o(()=>[l(k,{label:m.$t("set.ContainerCode"),prop:"BoxKey",clearable:""},{default:o(()=>[l(T,{modelValue:a.value.rowData.BoxKey,"onUpdate:modelValue":u[0]||(u[0]=w=>a.value.rowData.BoxKey=w),disabled:""},null,8,["modelValue"])]),_:1},8,["label"]),l(k,{label:m.$t("set.TargetLocation"),prop:"TargetLocation",clearable:""},{default:o(()=>[l(T,{modelValue:a.value.rowData.TargetLocation,"onUpdate:modelValue":u[1]||(u[1]=w=>a.value.rowData.TargetLocation=w)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","disabled","model"])]),_:1},8,["modelValue","title"])}}}),_e={class:"table-box"},ye={class:"table-search"},$e={class:"more-item"},Ce={class:"search-operation"},Te={class:"table-header"},ke={class:"header-button-lf"},Ve={class:"header-button-ri"},Be={style:{"margin-left":"10px"}},De={class:"table-empty"},Se=c("img",{src:ne,alt:"notData"},null,-1),Le=E({name:"managedbox"}),Ye=E({...Le,setup(x){const B=P({}),{tableData:D,searchShow:p,pageable:a,searchParam:i,getTableList:y,search:S,reset:m,handleSizeChange:u,handleCurrentChange:T}=be(we,B),{selectionChange:k,getRowKeys:L}=fe(),{BUTTONS:h}=ce(),R=async()=>{me(he,"\u5728\u7EBF\u5BB9\u5668\u6570\u636E",i.value)},w=C(),O=C(),H=(t,d={})=>{let U={title:t,rowData:{...d},isView:t==="\u67E5\u770B",apiUrl:t==="\u7F16\u8F91"?ve:"",getTableList:y};O.value.acceptParams(U)};return(t,d)=>{const U=s("el-input"),V=s("el-form-item"),K=s("el-option"),z=s("el-select"),q=s("el-date-picker"),j=s("el-form"),_=s("el-button"),I=s("el-icon"),n=s("el-table-column"),W=s("el-table"),X=s("el-pagination");return f(),F("div",_e,[c("div",ye,[l(j,{ref:"formRef",model:e(i),inline:!0,"label-width":"100px"},{default:o(()=>[l(V,{label:t.$t("set.ContainerCode"),style:{"margin-left":"10px"}},{default:o(()=>[l(U,{modelValue:e(i).BoxKey,"onUpdate:modelValue":d[0]||(d[0]=r=>e(i).BoxKey=r),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),l(V,{label:t.$t("set.ContainerType"),style:{"margin-left":"20px"}},{default:o(()=>[l(z,{modelValue:e(i).BoxType,"onUpdate:modelValue":d[1]||(d[1]=r=>e(i).BoxType=r),clearable:"",multiple:"","collapse-tags":""},{default:o(()=>[(f(!0),F(M,null,A(e(se),r=>(f(),v(K,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(V,{label:t.$t("set.Online")},{default:o(()=>[l(z,{modelValue:e(i).Online,"onUpdate:modelValue":d[2]||(d[2]=r=>e(i).Online=r),clearable:""},{default:o(()=>[(f(!0),F(M,null,A(e(ie),r=>(f(),v(K,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),Q(c("div",$e,[l(V,{label:t.$t("set.AddedTime")},{default:o(()=>[l(q,{modelValue:e(i).AddedTime,"onUpdate:modelValue":d[3]||(d[3]=r=>e(i).AddedTime=r),type:"datetimerange","start-placeholder":t.$t("set.StartTime"),"end-placeholder":t.$t("set.EndTime"),"value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"])],512),[[Y,e(p)]])]),_:1},8,["model"]),c("div",Ce,[l(_,{type:"primary",icon:e(G),onClick:e(S)},{default:o(()=>[g(b(t.$t("set.Search")),1)]),_:1},8,["icon","onClick"]),l(_,{icon:e(J),onClick:e(m)},{default:o(()=>[g(b(t.$t("set.Reset")),1)]),_:1},8,["icon","onClick"]),l(_,{type:"primary",link:"",class:"search-isOpen",onClick:d[4]||(d[4]=r=>p.value=!e(p))},{default:o(()=>[g(b(e(p)?t.$t("set.Close"):t.$t("set.Open"))+" ",1),l(I,{class:"el-icon--right"},{default:o(()=>[(f(),v(te(e(p)?e(oe):e(ae))))]),_:1})]),_:1})])]),c("div",Te,[c("div",ke,[e(h).export?(f(),v(_,{key:0,type:"primary",icon:e(ee),plain:"",onClick:R},{default:o(()=>[g(b(t.$t("set.ManageBoxExport")),1)]),_:1},8,["icon"])):N("",!0)]),c("div",Ve,[l(_,{icon:e(le),circle:"",onClick:e(y)},null,8,["icon","onClick"])])]),l(W,{height:"575",data:e(D),border:!0,onSelectionChange:e(k),"row-key":e(L),"row-style":{height:"30px"},"cell-style":{padding:"0px"},stripe:""},{empty:o(()=>[c("div",De,[Se,c("div",null,b(t.$t("set.NoData")),1)])]),default:o(()=>[l(n,{label:t.$t("set.SerialNumber"),width:"85"},{default:o(r=>[c("span",Be,b((e(a).pageNum-1)*e(a).pageSize+r.$index+1),1)]),_:1},8,["label"]),l(n,{prop:"BoxKey",label:t.$t("set.ContainerCode"),formatter:e($),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),l(n,{prop:"BoxType",label:t.$t("set.ContainerType"),"show-overflow-tooltip":"",width:"140",formatter:e(ue)},null,8,["label","formatter"]),l(n,{prop:"SKU",label:"SKU",formatter:e($),"show-overflow-tooltip":"",width:"180"},null,8,["formatter"]),l(n,{prop:"OnHandQty",label:t.$t("set.OnHandQty"),formatter:e($),"show-overflow-tooltip":"",width:"150"},null,8,["label","formatter"]),l(n,{prop:"AllocatedQty",label:t.$t("set.AllocatedQty"),formatter:e($),"show-overflow-tooltip":"",width:"150"},null,8,["label","formatter"]),l(n,{prop:"ErrorQty",label:t.$t("set.ErrorQty"),formatter:e($),"show-overflow-tooltip":"",width:"100"},null,8,["label","formatter"]),l(n,{prop:"Online",label:t.$t("set.Online"),formatter:e(de),"show-overflow-tooltip":"",width:"100"},null,8,["label","formatter"]),l(n,{prop:"TargetLocation",label:t.$t("set.TargetLocation"),"show-overflow-tooltip":"",width:"150"},null,8,["label"]),l(n,{prop:"LastRequestNode",label:t.$t("set.LastRequestNode"),"show-overflow-tooltip":"",width:"170"},null,8,["label"]),l(n,{prop:"LastRouteNode",label:t.$t("set.LastRouteNode"),"show-overflow-tooltip":"",width:"150"},null,8,["label"]),l(n,{prop:"TaskNo",label:t.$t("set.TaskNo"),"show-overflow-tooltip":"",width:"100"},null,8,["label"]),l(n,{prop:"AddedTime",label:t.$t("set.AddedTime"),"show-overflow-tooltip":"",width:"200"},null,8,["label"]),l(n,{prop:"OnlineTime",label:t.$t("set.OnlineTime"),"show-overflow-tooltip":"",width:"200"},null,8,["label"]),l(n,{prop:"LastUpdateTime",label:t.$t("set.LastUpdateTime"),"show-overflow-tooltip":"",width:"200"},null,8,["label"]),l(n,{prop:"Remark",label:t.$t("set.Remark"),"show-overflow-tooltip":"",width:"100"},null,8,["label"]),e(h).view||e(h).edit?(f(),v(n,{key:0,label:t.$t("set.Operate"),fixed:"right",width:"100"},{default:o(r=>[e(h).edit?(f(),v(_,{key:0,type:"primary",link:"",icon:e(re),onClick:Re=>H(t.$t("set.Edit"),r.row)},{default:o(()=>[g(b(t.$t("set.Edit")),1)]),_:2},1032,["icon","onClick"])):N("",!0)]),_:1},8,["label"])):N("",!0)]),_:1},8,["data","onSelectionChange","row-key"]),l(X,{currentPage:e(a).pageNum,"page-size":e(a).pageSize,"page-sizes":[10,25,50,100,1e3],background:"",layout:"total, sizes, prev, pager, next, jumper",total:e(a).total,onSizeChange:e(u),onCurrentChange:e(T)},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"]),l(ge,{ref_key:"drawerRef",ref:O},null,512),l(pe,{ref_key:"dialogRef",ref:w},null,512)])}}});export{Ye as default};
