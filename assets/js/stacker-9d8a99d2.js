import{d as A,G as le,a as re,i as D,b as ne,r as se,e as d,f as c,g as S,k as m,h as o,w as l,j as e,S as ie,_ as de,y as w,P as ue,V as y,W as K,F as me,K as pe,t as u,a7 as ce,a8 as B,Q as fe,R as he,n as h,M as we,X as be,Y as ye,ac as ke,Z as Ce}from"./index-3efbb394.js";import{_ as _e}from"./notData-2026ca54.js";import{d as s,a as ge}from"./util-8cf766eb.js";import{h as ve}from"./serviceDict-19376974.js";import{I as $e,u as Te}from"./index-7154a9df.js";import{u as Se}from"./useSelection-1dc1eb7e.js";import{u as $}from"./useHandleData-6dfe8d42.js";import{u as Ee}from"./useAuthButtons-6e5ad93a.js";import{u as Fe}from"./useTable-6d3cf82e.js";import{_ as Ve}from"./taskDrawer-ace4e4bf.js";import{d as De,f as Ke,h as Be,i as E,j as Ae}from"./task-dcbb5ca7.js";import"./plugin-vue_export-helper-b2bddca3.js";import"./index-2ef92394.js";const Le={class:"table-box"},Pe={class:"table-search"},Re={style:{"margin-left":"24px"}},Ue={class:"more-item"},ze={class:"search-operation"},Ne=h("\u5806\u579B\u673A\u91CD\u5165\u590D\u4F4D"),He={class:"table-header"},Ie={class:"header-button-lf"},Ye={class:"header-button-ri"},Oe={style:{"margin-left":"0"}},je={key:4},Me={class:"table-empty"},Qe=m("img",{src:_e,alt:"notData"},null,-1),qe=A({name:"stacker"}),it=A({...qe,setup(Ge){const F=le(),L=re(()=>F.language);D.global.locale=L.value;const{t:b}=D.global,P=ne({}),{tableData:R,pageable:k,searchParam:i,searchShow:C,initSearchParam:U,getTableList:_,search:z,reset:N,handleSizeChange:H,handleCurrentChange:I}=Fe(De,P),{selectionChange:Y,getRowKeys:O}=Se(),{BUTTONS:f}=Ee();U.value={};const j=async()=>{await $(Ke,{name:F.userInfo},"\u91CD\u5165\u4E4B\u540E\uFF0C\u5806\u579B\u673A\u4E0A\u8FB9\u7684\u8D27\u7269\u5DF2\u653E\u7F6E\u5B8C\u6210")},M=async t=>{await $(E,{state:"Resend",taskKey:t.TaskKey},b("set.Resend")+`\u3010${t.ContainerCode}\u3011`+b("set.Task")),_()},Q=async t=>{await $(E,{state:"Finished",taskKey:t.TaskKey},b("set.Complete")+`\u3010${t.ContainerCode}\u3011`+b("set.Task")),_()},q=async t=>{await $(E,{state:"Cancelled",taskKey:t.TaskKey},b("set.Cancel")+`\u3010${t.ContainerCode}\u3011`+b("set.Task")),_()},G=async()=>{Te(Be,"\u5806\u579B\u673A\u4EFB\u52A1",i.value)},V=se(),W=(t,n={})=>{let g={title:t,rowData:{...n},isView:t==="\u67E5\u770B",apiUrl:t==="\u7F16\u8F91"?Ae:"",getTableList:_};V.value.acceptParams(g)};return(t,n)=>{const g=d("el-input"),v=d("el-form-item"),X=d("el-option"),Z=d("el-select"),J=d("el-switch"),x=d("el-date-picker"),ee=d("el-form"),p=d("el-button"),te=d("el-icon"),r=d("el-table-column"),oe=d("el-table"),ae=d("el-pagination");return c(),S("div",Le,[m("div",Pe,[o(ee,{ref:"formRef",model:e(i),inline:!0,"label-width":"100px"},{default:l(()=>[o(v,{label:t.$t("set.ContainerCode")},{default:l(()=>[o(g,{modelValue:e(i).ContainerCode,"onUpdate:modelValue":n[0]||(n[0]=a=>e(i).ContainerCode=a),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),o(v,{label:t.$t("set.ExternalTaskKey")},{default:l(()=>[o(g,{modelValue:e(i).ExternalTaskKey,"onUpdate:modelValue":n[1]||(n[1]=a=>e(i).ExternalTaskKey=a),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),o(v,{label:t.$t("set.State")},{default:l(()=>[o(Z,{modelValue:e(i).State,"onUpdate:modelValue":n[2]||(n[2]=a=>e(i).State=a),clearable:"",multiple:"","collapse-tags":""},{default:l(()=>[(c(!0),S(me,null,pe(e(ve),a=>(c(),w(X,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),m("span",Re,u(t.$t("set.IsHistory")),1),o(J,{modelValue:e(i).IsHistory,"onUpdate:modelValue":n[3]||(n[3]=a=>e(i).IsHistory=a),style:{"margin-left":"8px"},"inline-prompt":"","active-icon":e(ce),"inactive-icon":e(B)},null,8,["modelValue","active-icon","inactive-icon"])]),_:1},8,["label"]),fe(m("div",Ue,[o(v,{label:t.$t("set.AddedTime")},{default:l(()=>[o(x,{modelValue:e(i).AddedTime,"onUpdate:modelValue":n[4]||(n[4]=a=>e(i).AddedTime=a),type:"datetimerange","start-placeholder":t.$t("set.StartTime"),"end-placeholder":t.$t("set.EndTime"),"value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"])],512),[[he,e(C)]])]),_:1},8,["model"]),m("div",ze,[o(p,{type:"primary",icon:e(ie),onClick:e(z)},{default:l(()=>[h(u(t.$t("set.Search")),1)]),_:1},8,["icon","onClick"]),o(p,{type:"primary",onClick:j},{default:l(()=>[Ne]),_:1}),o(p,{icon:e(de),onClick:e(N)},{default:l(()=>[h(u(t.$t("set.Reset")),1)]),_:1},8,["icon","onClick"]),o(p,{type:"primary",link:"",class:"search-isOpen",onClick:n[5]||(n[5]=a=>C.value=!e(C))},{default:l(()=>[h(u(e(C)?t.$t("set.Close"):t.$t("set.Open"))+" ",1),o(te,{class:"el-icon--right"},{default:l(()=>[(c(),w(we(e(C)?e(be):e(ye))))]),_:1})]),_:1})])]),m("div",He,[m("div",Ie,[e(f).export?(c(),w(p,{key:0,type:"primary",icon:e(ue),plain:"",onClick:G},{default:l(()=>[h(u(t.$t("set.StackerExport")),1)]),_:1},8,["icon"])):y("",!0)]),m("div",Ye,[o(p,{icon:e(K),circle:"",onClick:e(_)},null,8,["icon","onClick"])])]),o(oe,{height:"575",data:e(R),border:!0,onSelectionChange:e(Y),"row-key":e(O),"row-style":{height:"30px"},"cell-style":{padding:"0px"},stripe:""},{empty:l(()=>[m("div",Me,[Qe,m("div",null,u(t.$t("set.NoData")),1)])]),default:l(()=>[o(r,{label:t.$t("set.SerialNumber"),width:"80"},{default:l(a=>[m("span",Oe,u((e(k).pageNum-1)*e(k).pageSize+a.$index+1),1)]),_:1},8,["label"]),o(r,{prop:"TaskKey",label:t.$t("set.TaskKey"),formatter:e(s),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),o(r,{prop:"ContainerCode",label:t.$t("set.ContainerCode"),formatter:e(s),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),o(r,{prop:"Priority",label:t.$t("set.Priority"),formatter:e(s),"show-overflow-tooltip":"",width:"80"},null,8,["label","formatter"]),o(r,{prop:"State",label:t.$t("set.State"),formatter:e(ge),"show-overflow-tooltip":"",width:"100"},null,8,["label","formatter"]),o(r,{prop:"FromLocation",label:t.$t("set.FromLocation"),formatter:e(s),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),o(r,{prop:"ToLocation",label:t.$t("set.ToLocation"),formatter:e(s),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),o(r,{prop:"CurrentLocation",label:t.$t("set.CurrentLocation"),formatter:e(s),"show-overflow-tooltip":"",width:"150"},null,8,["label","formatter"]),o(r,{prop:"Qty",label:t.$t("set.Qty"),formatter:e(s),"show-overflow-tooltip":"",width:"150"},null,8,["label","formatter"]),o(r,{prop:"TryCount",label:t.$t("set.TryCount"),formatter:e(s),"show-overflow-tooltip":"",width:"100"},null,8,["label","formatter"]),o(r,{prop:"ExternalTaskKey",label:t.$t("set.ExternalTaskKey"),formatter:e(s),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),o(r,{prop:"EquimentTaskKey",label:t.$t("set.EquimentTaskKey"),formatter:e(s),"show-overflow-tooltip":"",width:"150"},null,8,["label","formatter"]),o(r,{prop:"AddedTime",label:t.$t("set.AddedTime"),formatter:e(s),"show-overflow-tooltip":"",sortable:"","sort-orders":["descending","ascending"],width:"200"},null,8,["label","formatter"]),o(r,{prop:"LastUpdateTime",label:t.$t("set.LastUpdateTime"),formatter:e(s),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),o(r,{prop:"CompleteTime",label:t.$t("set.CompletedTime"),formatter:e(s),"show-overflow-tooltip":"",sortable:"","sort-orders":["descending","ascending"],width:"200"},null,8,["label","formatter"]),o(r,{label:t.$t("set.Operate"),fixed:"right",width:"300"},{default:l(a=>[e(f).reset&&a.row.State!="Finished"&&a.row.Status!="Cancelled"?(c(),w(p,{key:0,type:"primary",link:"",icon:e(K),onClick:T=>M(a.row)},{default:l(()=>[h(u(t.$t("set.Resend")),1)]),_:2},1032,["icon","onClick"])):y("",!0),e(f).reset&&a.row.State!="Finished"&&a.row.Status!="Cancelled"?(c(),w(p,{key:1,type:"primary",link:"",icon:e(ke),onClick:T=>Q(a.row)},{default:l(()=>[h(u(t.$t("set.Complete")),1)]),_:2},1032,["icon","onClick"])):y("",!0),e(f).delete&&a.row.State!="Finished"&&a.row.Status!="Cancelled"?(c(),w(p,{key:2,type:"primary",link:"",icon:e(B),onClick:T=>q(a.row)},{default:l(()=>[h(u(t.$t("set.Cancel")),1)]),_:2},1032,["icon","onClick"])):y("",!0),e(f).delete&&a.row.State!="Finished"&&a.row.Status!="Cancelled"?(c(),w(p,{key:3,type:"primary",link:"",icon:e(Ce),onClick:T=>W(t.$t("set.Edit"),a.row)},{default:l(()=>[h(u(t.$t("set.Edit")),1)]),_:2},1032,["icon","onClick"])):y("",!0),!e(f).view&&!e(f).edit&&!e(f).reset&&!e(f).delete?(c(),S("span",je,"--")):y("",!0)]),_:1},8,["label"])]),_:1},8,["data","onSelectionChange","row-key"]),o(ae,{currentPage:e(k).pageNum,"page-size":e(k).pageSize,"page-sizes":[10,25,50,100,1e3],background:"",layout:"total, sizes, prev, pager, next, jumper",total:e(k).total,onSizeChange:e(H),onCurrentChange:e(I)},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"]),o(Ve,{ref_key:"drawerRef",ref:V},null,512),o($e,{ref:"dialogRef"},null,512)])}}});export{it as default};
