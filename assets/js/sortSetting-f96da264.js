import{d as L,b as W,r as I,e as u,f as d,y as b,w as a,h as l,n as g,t as f,Q as X,R as Z,g as D,K as B,j as e,F as q,E as de,G as me,a as pe,i as j,k as _,S as ce,_ as G,U as be,V as $,P as fe,N as ge,W as ve,M as _e,X as we,Y as Ce,Z as Se}from"./index-3efbb394.js";import{_ as ye}from"./notData-2026ca54.js";import{I as $e,u as he}from"./index-7154a9df.js";import{d as A}from"./util-8cf766eb.js";import{u as Ve}from"./useSelection-1dc1eb7e.js";import{u as ke}from"./useAuthButtons-6e5ad93a.js";import{u as De}from"./useTable-6d3cf82e.js";import{w as J,a as Ie}from"./serviceDict-19376974.js";import{p as Ee,q as Ae,r as Ne,s as Ue,t as Te,u as Fe,v as Pe,w as Re}from"./basicInfo-e79afad1.js";import{u as Q}from"./useHandleData-6dfe8d42.js";import"./plugin-vue_export-helper-b2bddca3.js";import"./index-2ef92394.js";const ze=L({setup(x,{expose:N}){const U=W({CustomerId:[{required:!0,trigger:"blur"}],CustomerName:[{required:!0,trigger:"blur"}],DistributionAddr:[{required:!0,trigger:"blur"}],SlideId:[{required:!0,trigger:"blur"}]}),p=I(!1),n=I({isView:!1,title:""}),T=r=>{n.value=r,p.value=!0},w=I(),h=()=>{w.value.validate(async r=>{if(!!r)try{if(!n.value.apiUrl)return;await n.value.apiUrl(n.value.rowData),de.success({message:`${n.value.title}\u6210\u529F\uFF01`}),n.value.getTableList&&n.value.getTableList(),p.value=!1}catch(i){}})};return N({acceptParams:T}),(r,i)=>{const V=u("el-input"),C=u("el-form-item"),F=u("el-option"),P=u("el-select"),R=u("el-form"),E=u("el-button"),c=u("el-drawer");return d(),b(c,{modelValue:p.value,"onUpdate:modelValue":i[5]||(i[5]=m=>p.value=m),"destroy-on-close":!0,size:"550px",title:n.value.title+r.$t("set.SortSetting")},{footer:a(()=>[l(E,{onClick:i[4]||(i[4]=m=>p.value=!1)},{default:a(()=>[g(f(r.$t("set.Cancel")),1)]),_:1}),X(l(E,{type:"primary",onClick:h},{default:a(()=>[g(f(r.$t("set.Confirm")),1)]),_:1},512),[[Z,!n.value.isView]])]),default:a(()=>[l(R,{ref_key:"ruleFormRef",ref:w,rules:e(U),disabled:n.value.isView,model:n.value.rowData,"label-width":"150px"},{default:a(()=>[l(C,{label:r.$t("set.CustomerId"),prop:"CustomerId",clearable:""},{default:a(()=>[l(V,{modelValue:n.value.rowData.CustomerId,"onUpdate:modelValue":i[0]||(i[0]=m=>n.value.rowData.CustomerId=m),disabled:n.value.title!==r.$t("set.Add")},null,8,["modelValue","disabled"])]),_:1},8,["label"]),l(C,{label:r.$t("set.CustomerName"),prop:"CustomerName",clearable:""},{default:a(()=>[l(V,{modelValue:n.value.rowData.CustomerName,"onUpdate:modelValue":i[1]||(i[1]=m=>n.value.rowData.CustomerName=m)},null,8,["modelValue"])]),_:1},8,["label"]),l(C,{label:r.$t("set.DistributionAddr"),prop:"DistributionAddr",clearable:""},{default:a(()=>[l(V,{modelValue:n.value.rowData.DistributionAddr,"onUpdate:modelValue":i[2]||(i[2]=m=>n.value.rowData.DistributionAddr=m)},null,8,["modelValue"])]),_:1},8,["label"]),l(C,{label:r.$t("set.SlideId"),prop:"SlideId",clearable:""},{default:a(()=>[l(P,{modelValue:n.value.rowData.SlideId,"onUpdate:modelValue":i[3]||(i[3]=m=>n.value.rowData.SlideId=m),clearable:""},{default:a(()=>[(d(!0),D(q,null,B(e(J),m=>(d(),b(F,{key:m.value,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","disabled","model"])]),_:1},8,["modelValue","title"])}}}),Be={class:"table-box"},qe={class:"table-search"},Le={class:"more-item"},Ye={class:"search-operation"},Me={class:"table-header"},Oe={class:"header-button-lf"},He={class:"header-button-ri"},Ke={key:2},je={class:"table-empty"},Ge=_("img",{src:ye,alt:"notData"},null,-1),Qe=L({name:"sortSetting"}),st=L({...Qe,setup(x){const N=me(),U=pe(()=>N.language);j.global.locale=U.value;const{t:p}=j.global,n=W({}),{tableData:T,searchShow:w,pageable:h,searchParam:r,getTableList:i,search:V,reset:C,handleSizeChange:F,handleCurrentChange:P}=De(Ee,n),{selectionChange:R,getRowKeys:E}=Ve(),{BUTTONS:c}=ke(),m=async()=>{he(Ae,p("set.SortSetting"),r.value)},ee=async(t,s)=>{await Q(Pe,{customerid:s.CustomerId,status:t},p("set.Change")+`\u3010${s.CustomerId}\u3011`+p("set.Status")),i()},Y=I(),te=()=>{let t={title:p("set.SortSetting"),tempApi:Ne,importApi:Ue,getTableList:i};Y.value.acceptParams(t)},le=async t=>{await Q(Re,{id:t.SerialKey},p("set.Delete")+`\u3010${t.CustomerId}\u3011`+p("set.SortSetting")),i()},M=I(),O=(t,s={})=>{let k={title:t,rowData:{...s},isView:t==="\u67E5\u770B",apiUrl:t==="\u65B0\u589E"?Te:t==="\u7F16\u8F91"?Fe:"",getTableList:i};M.value.acceptParams(k)};return(t,s)=>{const k=u("el-input"),S=u("el-form-item"),H=u("el-option"),K=u("el-select"),ae=u("el-date-picker"),oe=u("el-form"),v=u("el-button"),re=u("el-icon"),y=u("el-table-column"),ne=u("el-switch"),se=u("el-tag"),ie=u("el-table"),ue=u("el-pagination");return d(),D("div",Be,[_("div",qe,[l(oe,{ref:"formRef",model:e(r),inline:!0,"label-width":"100px"},{default:a(()=>[l(S,{label:t.$t("set.CustomerId")},{default:a(()=>[l(k,{modelValue:e(r).CustomerId,"onUpdate:modelValue":s[0]||(s[0]=o=>e(r).CustomerId=o),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),l(S,{label:t.$t("set.CustomerName")},{default:a(()=>[l(k,{modelValue:e(r).CustomerName,"onUpdate:modelValue":s[1]||(s[1]=o=>e(r).CustomerName=o),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),l(S,{label:t.$t("set.DistributionAddr")},{default:a(()=>[l(k,{modelValue:e(r).DistributionAddr,"onUpdate:modelValue":s[2]||(s[2]=o=>e(r).DistributionAddr=o),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),l(S,{label:t.$t("set.SlideId")},{default:a(()=>[l(K,{modelValue:e(r).SlideId,"onUpdate:modelValue":s[3]||(s[3]=o=>e(r).SlideId=o),clearable:""},{default:a(()=>[(d(!0),D(q,null,B(e(J),o=>(d(),b(H,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(S,{label:t.$t("set.Enable")},{default:a(()=>[l(K,{modelValue:e(r).Enable,"onUpdate:modelValue":s[4]||(s[4]=o=>e(r).Enable=o),clearable:""},{default:a(()=>[(d(!0),D(q,null,B(e(Ie),o=>(d(),b(H,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),X(_("div",Le,[l(S,{label:t.$t("set.AddedTime")},{default:a(()=>[l(ae,{modelValue:e(r).AddedTime,"onUpdate:modelValue":s[5]||(s[5]=o=>e(r).AddedTime=o),type:"datetimerange","start-placeholder":t.$t("set.StartTime"),"end-placeholder":t.$t("set.EndTime"),"value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"])],512),[[Z,e(w)]])]),_:1},8,["model"]),_("div",Ye,[l(v,{type:"primary",icon:e(ce),onClick:e(V)},{default:a(()=>[g(f(t.$t("set.Search")),1)]),_:1},8,["icon","onClick"]),l(v,{icon:e(G),onClick:e(C)},{default:a(()=>[g(f(t.$t("set.Reset")),1)]),_:1},8,["icon","onClick"]),l(v,{type:"primary",link:"",class:"search-isOpen",onClick:s[6]||(s[6]=o=>w.value=!e(w))},{default:a(()=>[g(f(e(w)?t.$t("set.Close"):t.$t("set.Open"))+" ",1),l(re,{class:"el-icon--right"},{default:a(()=>[(d(),b(_e(e(w)?e(we):e(Ce))))]),_:1})]),_:1})])]),_("div",Me,[_("div",Oe,[e(c).add?(d(),b(v,{key:0,type:"primary",icon:e(be),onClick:s[7]||(s[7]=o=>O(t.$t("set.Add")))},{default:a(()=>[g(f(t.$t("set.AddSortSetting")),1)]),_:1},8,["icon"])):$("",!0),e(c).export?(d(),b(v,{key:1,type:"primary",icon:e(fe),plain:"",onClick:m},{default:a(()=>[g(f(t.$t("set.ExportSortSetting")),1)]),_:1},8,["icon"])):$("",!0),e(c).import?(d(),b(v,{key:2,type:"primary",icon:e(ge),plain:"",onClick:te},{default:a(()=>[g(f(t.$t("set.BatchImport")),1)]),_:1},8,["icon"])):$("",!0)]),_("div",He,[l(v,{icon:e(ve),circle:"",onClick:e(i)},null,8,["icon","onClick"])])]),l(ie,{height:"575",data:e(T),border:!0,onSelectionChange:e(R),"row-key":e(E),"row-style":{height:"30px"},"cell-style":{padding:"0px"},stripe:""},{empty:a(()=>[_("div",je,[Ge,_("div",null,f(t.$t("set.NoData")),1)])]),default:a(()=>[l(y,{prop:"CustomerId",label:t.$t("set.CustomerId"),formatter:e(A),"show-overflow-tooltip":"",width:"300",sortable:"","sort-orders":["descending","ascending"]},null,8,["label","formatter"]),l(y,{prop:"CustomerName",label:t.$t("set.CustomerName"),formatter:e(A),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),l(y,{prop:"DistributionAddr",label:t.$t("set.DistributionAddr"),formatter:e(A),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),l(y,{prop:"SlideId",label:t.$t("set.SlideId"),formatter:e(A),"show-overflow-tooltip":"",width:"200"},null,8,["label","formatter"]),l(y,{prop:"Enable",label:t.$t("set.Status"),width:"180"},{default:a(o=>[e(c).status?(d(),b(ne,{key:0,value:o.row.Enable,"active-text":o.row.Enable===1?t.$t("set.Enable"):t.$t("set.Disable"),"active-value":1,"inactive-value":0,onChange:z=>ee(z,o.row)},null,8,["value","active-text","onChange"])):(d(),b(se,{key:1,type:o.row.Enable===1?"success":"danger"},{default:a(()=>[g(f(o.row.Enable===1?t.$t("set.Enable"):t.$t("set.Disable")),1)]),_:2},1032,["type"]))]),_:1},8,["label"]),l(y,{label:t.$t("set.Operate"),fixed:"right",width:"200"},{default:a(o=>[e(c).edit?(d(),b(v,{key:0,type:"primary",link:"",icon:e(Se),onClick:z=>O(t.$t("set.Edit"),o.row)},{default:a(()=>[g(f(t.$t("set.Edit")),1)]),_:2},1032,["icon","onClick"])):$("",!0),e(c).delete?(d(),b(v,{key:1,type:"primary",link:"",icon:e(G),onClick:z=>le(o.row)},{default:a(()=>[g(f(t.$t("set.Delete")),1)]),_:2},1032,["icon","onClick"])):$("",!0),!e(c).view&&!e(c).edit&&!e(c).reset&&!e(c).delete?(d(),D("span",Ke,"--")):$("",!0)]),_:1},8,["label"])]),_:1},8,["data","onSelectionChange","row-key"]),l(ue,{currentPage:e(h).pageNum,"page-size":e(h).pageSize,"page-sizes":[10,25,50,100,1e3],background:"",layout:"total, sizes, prev, pager, next, jumper",total:e(h).total,onSizeChange:e(F),onCurrentChange:e(P)},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"]),l(ze,{ref_key:"drawerRef",ref:M},null,512),l($e,{ref_key:"dialogRef",ref:Y},null,512)])}}});export{st as default};
